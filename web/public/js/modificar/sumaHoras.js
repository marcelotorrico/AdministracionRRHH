$(document).ready(function(){
	$("#horasNormales").change(function(){
            var horasNormales  = $("#horasNormales").val();
            var horasNormales1 = $("#horasNormales1").val();
            var horasNormales2 = $("#horasNormales2").val();
            var horasNormales3 = $("#horasNormales3").val();
            var horasNormales4 = $("#horasNormales4").val();
            var horasNormales5 = $("#horasNormales5").val();
            var total = sumar(horasNormales, horasNormales1, horasNormales2, horasNormales3, horasNormales4, horasNormales5);
            $("#totalHorasNormales").val(total);
	});
        $("#horasNormales1").change(function(){
            var horasNormales  = $("#horasNormales").val();
            var horasNormales1 = $("#horasNormales1").val();
            var horasNormales2 = $("#horasNormales2").val();
            var horasNormales3 = $("#horasNormales3").val();
            var horasNormales4 = $("#horasNormales4").val();
            var horasNormales5 = $("#horasNormales5").val();
            var total = sumar(horasNormales, horasNormales1, horasNormales2, horasNormales3, horasNormales4, horasNormales5);
            $("#totalHorasNormales").val(total);
	});
        $("#horasNormales2").change(function(){
            var horasNormales  = $("#horasNormales").val();
            var horasNormales1 = $("#horasNormales1").val();
            var horasNormales2 = $("#horasNormales2").val();
            var horasNormales3 = $("#horasNormales3").val();
            var horasNormales4 = $("#horasNormales4").val();
            var horasNormales5 = $("#horasNormales5").val();
            var total = sumar(horasNormales, horasNormales1, horasNormales2, horasNormales3, horasNormales4, horasNormales5);
            $("#totalHorasNormales").val(total);
	});
        $("#horasNormales3").change(function(){
            var horasNormales  = $("#horasNormales").val();
            var horasNormales1 = $("#horasNormales1").val();
            var horasNormales2 = $("#horasNormales2").val();
            var horasNormales3 = $("#horasNormales3").val();
            var horasNormales4 = $("#horasNormales4").val();
            var horasNormales5 = $("#horasNormales5").val();
            var total = sumar(horasNormales, horasNormales1, horasNormales2, horasNormales3, horasNormales4, horasNormales5);
            $("#totalHorasNormales").val(total);
	});
        $("#horasNormales4").change(function(){
            var horasNormales  = $("#horasNormales").val();
            var horasNormales1 = $("#horasNormales1").val();
            var horasNormales2 = $("#horasNormales2").val();
            var horasNormales3 = $("#horasNormales3").val();
            var horasNormales4 = $("#horasNormales4").val();
            var horasNormales5 = $("#horasNormales5").val();
            var total = sumar(horasNormales, horasNormales1, horasNormales2, horasNormales3, horasNormales4, horasNormales5);
            $("#totalHorasNormales").val(total);
	});
        $("#horasNormales5").change(function(){
            var horasNormales  = $("#horasNormales").val();
            var horasNormales1 = $("#horasNormales1").val();
            var horasNormales2 = $("#horasNormales2").val();
            var horasNormales3 = $("#horasNormales3").val();
            var horasNormales4 = $("#horasNormales4").val();
            var horasNormales5 = $("#horasNormales5").val();
            var total = sumar(horasNormales, horasNormales1, horasNormales2, horasNormales3, horasNormales4, horasNormales5);
            $("#totalHorasNormales").val(total);
	});
        $("#horasExtras").change(function(){
            var horasExtras    = $("#horasExtras").val();
            var horasExtras1   = $("#horasExtras1").val();
            var horasExtras2   = $("#horasExtras2").val();
            var horasExtras3   = $("#horasExtras3").val();
            var horasExtras4   = $("#horasExtras4").val();
            var horasExtras5   = $("#horasExtras5").val();
            var total = sumar(horasExtras, horasExtras1, horasExtras2, horasExtras3, horasExtras4, horasExtras5);
            $("#totalHorasExtras").val(total);
	});
        $("#horasExtras1").change(function(){
            var horasExtras    = $("#horasExtras").val();
            var horasExtras1   = $("#horasExtras1").val();
            var horasExtras2   = $("#horasExtras2").val();
            var horasExtras3   = $("#horasExtras3").val();
            var horasExtras4   = $("#horasExtras4").val();
            var horasExtras5   = $("#horasExtras5").val();
            var total = sumar(horasExtras, horasExtras1, horasExtras2, horasExtras3, horasExtras4, horasExtras5);
            $("#totalHorasExtras").val(total);
	});
        $("#horasExtras2").change(function(){
            var horasExtras    = $("#horasExtras").val();
            var horasExtras1   = $("#horasExtras1").val();
            var horasExtras2   = $("#horasExtras2").val();
            var horasExtras3   = $("#horasExtras3").val();
            var horasExtras4   = $("#horasExtras4").val();
            var horasExtras5   = $("#horasExtras5").val();
            var total = sumar(horasExtras, horasExtras1, horasExtras2, horasExtras3, horasExtras4, horasExtras5);
            $("#totalHorasExtras").val(total);
	});
        $("#horasExtras3").change(function(){
            var horasExtras    = $("#horasExtras").val();
            var horasExtras1   = $("#horasExtras1").val();
            var horasExtras2   = $("#horasExtras2").val();
            var horasExtras3   = $("#horasExtras3").val();
            var horasExtras4   = $("#horasExtras4").val();
            var horasExtras5   = $("#horasExtras5").val();
            var total = sumar(horasExtras, horasExtras1, horasExtras2, horasExtras3, horasExtras4, horasExtras5);
            $("#totalHorasExtras").val(total);
	});
        $("#horasExtras4").change(function(){
            var horasExtras    = $("#horasExtras").val();
            var horasExtras1   = $("#horasExtras1").val();
            var horasExtras2   = $("#horasExtras2").val();
            var horasExtras3   = $("#horasExtras3").val();
            var horasExtras4   = $("#horasExtras4").val();
            var horasExtras5   = $("#horasExtras5").val();
            var total = sumar(horasExtras, horasExtras1, horasExtras2, horasExtras3, horasExtras4, horasExtras5);
            $("#totalHorasExtras").val(total);
	});
        $("#horasExtras5").change(function(){
            var horasExtras    = $("#horasExtras").val();
            var horasExtras1   = $("#horasExtras1").val();
            var horasExtras2   = $("#horasExtras2").val();
            var horasExtras3   = $("#horasExtras3").val();
            var horasExtras4   = $("#horasExtras4").val();
            var horasExtras5   = $("#horasExtras5").val();
            var total = sumar(horasExtras, horasExtras1, horasExtras2, horasExtras3, horasExtras4, horasExtras5);
            $("#totalHorasExtras").val(total);
	});
        function sumar(horasNormales, horasNormales1, horasNormales2, horasNormales3, horasNormales4, horasNormales5){
            var dot  = horasNormales.indexOf(":");
            var dot1 = horasNormales1.indexOf(":");
            var dot2 = horasNormales2.indexOf(":");
            var dot3 = horasNormales3.indexOf(":");
            var dot4 = horasNormales4.indexOf(":");
            var dot5 = horasNormales5.indexOf(":");
            var h    = horasNormales.substr(0, dot);
            var h1   = horasNormales1.substr(0, dot1);
            var h2   = horasNormales2.substr(0, dot2);
            var h3   = horasNormales3.substr(0, dot3);
            var h4   = horasNormales4.substr(0, dot4);
            var h5   = horasNormales5.substr(0, dot5);
            var m    = horasNormales.substr(dot + 1);
            var m1   = horasNormales1.substr(dot1 + 1);
            var m2   = horasNormales2.substr(dot2 + 1);
            var m3   = horasNormales3.substr(dot3 + 1);
            var m4   = horasNormales4.substr(dot4 + 1);
            var m5   = horasNormales5.substr(dot5 + 1);
            var mRes = (Number(m) + Number(m1) + Number(m2) + Number(m3) + Number(m4) + Number(m5));
            var hRes = (Number(h) + Number(h1) + Number(h2) + Number(h3) + Number(h4) + Number(h5));
            if (mRes >= 300){
                mRes -= 300;
                hRes = (Number(h) + Number(h1) + Number(h2) + Number(h3) + Number(h4) + Number(h5) + 5);
                return String(hRes) + ":" + String(mRes);
            }else{
                if (mRes >= 240){
                    mRes -= 240;
                    hRes = (Number(h) + Number(h1) + Number(h2) + Number(h3) + Number(h4) + Number(h5) + 4);
                    return String(hRes) + ":" + String(mRes);
                }else{
                    if (mRes >= 180){
                        mRes -= 180;
                        hRes = (Number(h) + Number(h1) + Number(h2) + Number(h3) + Number(h4) + Number(h5) + 3);
                        return String(hRes) + ":" + String(mRes);
                    }else{
                        if (mRes >= 120){
                            mRes -= 120;
                            hRes = (Number(h) + Number(h1) + Number(h2) + Number(h3) + Number(h4) + Number(h5) + 2);
                            return String(hRes) + ":" + String(mRes);
                        }else{
                            if (mRes >= 60){
                                mRes -= 60;
                                hRes = (Number(h) + Number(h1) + Number(h2) + Number(h3) + Number(h4) + Number(h5) + 1);
                                return String(hRes) + ":" + String(mRes);
                            }else{
                                return String(hRes) + ":" + String(mRes);
                            }
                        }
                    }
                }
            }   
        }
        
        $("#enviar").on("click", function(e) {
            
            var horaInicio = document.getElementById("horaIngresoManana");
            var horaFinal = document.getElementById("horaSalidaManana");
            var horaInicioTarde = document.getElementById("horaIngresoTarde");
            var horaFinalTarde = document.getElementById("horaSalidaTarde");
            var totalHorasNormales = document.getElementById("totalHorasNormales");
            var totalHorasExtras = document.getElementById("totalHorasExtras");
            if( horaInicio.value != "" && horaFinal.value != "" && horaInicioTarde.value != "" && horaFinalTarde.value != "" && totalHorasNormales.value != ""){
                var hora1 = horaInicio.value.split(":");
                var hora2 = horaFinal.value.split(":");
                var horaTarde1 = horaInicioTarde.value.split(":");
                var horaTarde2 = horaFinalTarde.value.split(":");
                var t1 = new Date();
                var t2 = new Date();
                var t3 = new Date();
                var t4 = new Date();
                
                t1.setHours(hora2[0], hora2[1]);
                t2.setHours(hora1[0], hora1[1]);
                t3.setHours(horaTarde2[0], horaTarde2[1]);
                t4.setHours(horaTarde1[0], horaTarde1[1]);
                
                t1.setHours(t1.getHours() - t2.getHours(), t1.getMinutes() - t2.getMinutes());
                t3.setHours(t3.getHours() - t4.getHours(), t3.getMinutes() - t4.getMinutes());
                var horaMañana = (t1.getHours() ? t1.getHours() : "0") + (t1.getMinutes() ? ":" + t1.getMinutes() : ":0");
                var horaTarde  = (t3.getHours() ? t3.getHours() : "0") + (t3.getMinutes() ? ":" + t3.getMinutes() : ":0");
                var horaM = horaMañana.split(":");
                var horaT = horaTarde.split(":");
                var horasTotal = parseInt(horaM[0]) + parseInt(horaT[0]);
                var minutosTotal = parseInt(horaM[1]) + parseInt(horaT[1]);
                if(minutosTotal > 59){
                    horasTotal +=1;
                    minutosTotal = minutosTotal - 60;
                }
                var horasTrabajadas = horasTotal+""+":"+minutosTotal+"";
                
                var horasNormales = totalHorasNormales.value.split(":");
                if(totalHorasExtras.value != ""){
                    var horasExtras = totalHorasExtras.value.split(":");
                    var horasTotal1 = parseInt(horasNormales[0]) + parseInt(horasExtras[0]);
                    var minutosTotal1 = parseInt(horasNormales[1]) + parseInt(horasExtras[1]);
                    if(minutosTotal1 > 59){
                        horasTotal1 +=1;
                        minutosTotal1 = minutosTotal1 - 60;
                    }
                    var horasTrabajadas1 = horasTotal1+""+":"+minutosTotal1+"";
                }else{
                    var horasTrabajadas1 = totalHorasNormales.value;
                }
                
                if(horasTrabajadas != horasTrabajadas1){
                    alert("La totalidad de las horas normales y extras son incoherentes respecto a las horas de ingreso y salida");
                    return false;
                }
            }            
	});
});