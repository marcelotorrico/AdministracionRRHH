{% extends 'layout.html.twig' %}
    
{% block body %}
    {{ parent() }}
    
    {% for flashMessage in app.session.flashbag.get('notice') %}
        <script>alert('{{ flashMessage }}');</script>
    {% endfor %}
    
    <section class="jumbotron">
        <div class="container">
            <h2>Crear Requisito para una Categoria</h2>
        </div>
    </section>

    <div class="container">
        <div id="main">
            <form action="{{ path("mtd_requisito_registrar") }}" method="post" role="form">
                {{form_errors(form)}}

                <div class="row">
                    <div class="col-md-12">
                        <div class ="form-group">
                            <div class="input-group">
                                {{ form_label(form.nombre, 'Nombre del Requisito:', {'label_attr': {'class': 'input-group-addon addonGroup'}}) }}

                                {{ form_widget(form.nombre, { 'attr': {'placeholder': 'Escriba el nombre del requisito', 'class': 'form-control inputGroup',
                                                             'title': 'Nombre del Requisito' } }) }}      
                            </div>
                            {{ form_errors(form.nombre) }}
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class ="form-group">
                            <div class="input-group">
                                {{ form_label(form.descripcion, 'Descripcion:', {'label_attr': {'class': 'input-group-addon addonGroup'}}) }}

                                {{ form_widget(form.descripcion, { 'attr': {'placeholder': 'Escriba una descripcion del requisito', 'class': 'form-control inputGroup',
                                                             'title': 'Descripcion del Requisito' } }) }}      
                            </div>
                            {{ form_errors(form.descripcion) }}
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class ="form-group">
                            <div class="input-group">
                                {{ form_label(form.categoria, 'Categoria:', {'label_attr': {'class': 'input-group-addon addonGroup'}}) }}

                                {{ form_widget(form.categoria, { 'attr': { 'class': 'form-control inputGroup',
                                                             'title': 'Seleccione la categoria' } }) }}      
                            </div>
                            {{ form_errors(form.categoria) }}
                        </div>
                    </div>
                </div>

                <div class ="form-group">
                    <button type="submit" id ="enviar" name="enviar" class="btn btn-primary"> Registrar</button>
                </div>
            </form>
        </div>
    </div>
    <div class="container">    
        <div class="panel panel-danger">
            <div class="panel-heading" role="tab" id="heading1">
                <h4 class="panel-title">
                    <a href="#collapse1" data-toggle="collapse" data-parent="#accordion">
                        Lista de los Requisitos para las Categorias
                    </a>
                </h4>
            </div>
            <div id="collapse1" class="panel-collapse collapse in">
                <div class="panel-body">
                    <div class="table-responsive">
                        <table class="table table-striped table-hover">
                            <thead>
                                <tr>
                                    <th>Nombre del Requisito</th>
                                    <th>Descripcion</th>
                                    <th>Categoria</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for requisito in requisitos %}
                                    {% if requisito.activo == true %}
                                        <tr>
                                            <td><strong>{{ requisito.nombre }}</strong></td>
                                            <td>{{ requisito.descripcion }}</td>
                                            <td><strong>{{ requisito.categoria.nombre }}</strong></td>
                                            <td>
                                                <a href="" class="btn btn-sm btn-danger btn-delete confirmarEliminacion">
                                                    Eliminar
                                                </a>
                                            </td>
                                        </tr>
                                    {% endif %}
                                {% endfor %}
                            </tbody>    
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
    
{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('public/js/guardar/guardarRequisito.js') }}"></script>
    <script src="{{ asset('public/js/jquery-blockUI.js') }}"></script>
{% endblock %}